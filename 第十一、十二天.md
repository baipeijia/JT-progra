###第十一天：

####第十一天草稿：

solr 
服务器
自带 web 容器 jetty


[图片]

[图片]

[图片]
备注：不是example下的，是server目录下的
[图片]
备注：不是example下的，是server目录下的
[图片]
配置一个中文分词器
IK 分词器

书作者，
创建索引，需要，
持久化，不需要
[图片]

[图片]

业务实现，商品信息查询
1）将商品信息放到索引中，由 solr 自动创建索引
2）在前台页面调用 solr 全文检索，返回列表页面，关键字加亮
solr 和 spring 进行整合，加入中文分词的支持
httpClient 从后台查询数据



###第十二天：

####第十二天草稿：
1. nexus 
maven的私服仓库
升级了：
a）将 bat 命令方式改进为服务
b ）war 包必须自己部署到 tomcat，
改进自带 jetty，默认端口 8081
c）新版默认是安装文件的同级目录
部署过程：
1）解压 nexus-bundle.zip 文件
2）安装服务
/bin/nexus install 安装


2.队列
rabbitmq 重量级的，消息的安全性
redis 轻量级的，利用 redis 固有特效，很多点实现阻塞 list，
因为 redis 这些结构刚好满足队列实现，可以充当简单的队列，
自带 set 排序集合，实现优先级队列。


3.mysql 数据库主从复制
数据库备份，实时备份
思路，工作原理：
1）监听日志，操作的命令的日志
2）增量，时间戳
3）日志文件是二进制的
过程：
主上面开启二进制日志，只记录操作日志，
从服务器配置它的主是谁，开启一个 IOThead线程，
监听主数据库的日志文件，如果日志文件变更，就复制它的内容到从数据库服务器，
再开始一个线程 SQLThread ，这个线程从日志中读取 sql 操作语句（增删改），在从数据库中执行。
[图片]
同一台机器装2个mysql服务器，百度方法
[图片]

[图片]
配置从服务器， server-id=2
[图片]


4.mysql 数据库读写分离
如何解决数据库访问的瓶颈？
将读和写分开，这样提高查询的效率，减少读和写动作冲突，性能提高数倍。

解决方案：
1）spring AOP 思想来实现对 service 调用方法的前缀，
通过前缀来判断，query、find、get 即可以转向主服务器，也可以转向从服务器，
insert、update、delete 只转向主服务器。
缺点：负载均衡，高可用
2）amoeba 阿米巴 
国人软件，mysql proxy ，性能高、负载均衡、高可用，
[图片]

[图片]



