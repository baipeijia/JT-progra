###第五天：

####第五天草稿：


Redis 结合业务中
前台分类结构。
1）在读取分类前，先设置将其放入缓存中
2）在访问的地方去读缓存

可以直接返回 java 对象，
为何 redis 先把对象转为串，然后再传入？
原因在于：好转换，好传递，
前台调用后台，必须用序列化，
根源在于不同的虚拟机。
json中立

小结：
1）redis，写set方法。key要短，值能存的大，过期时间。
2）什么样内容适合写到缓存中，经常查询很少编辑。
3）商品分类，大广告位，京东快报，生活服务，活动
4）必须处理异常。redis是一个备份，永远业务必须有自己的主角，
两条路，可以走捷径，也可以走正确的道路。
5）一个点来写，多个点来读

jackson 后台转换
1）java对象转换为json串
2）json串转换为单个java对象

大广告位：图片+链接+详细内容
京东快报：文字+链接+详细内容
抽象：详细表=图片+文字+链接+详情+分类

CMS 内容管理

复合索引：
多个字段，左前缀特色。
parent_id, status
查询 patent_id，能否用的这个索引？ 可以
查询 status，能否用到这个索引？ 不能
查询 parent_id 和 status，能否用到这个索引？ 能
复合索引要想使用必须带上最左边的索引。
使用该索引，拼sql时，where条件是有先后顺序的。

分析 content-category.jsp 页面
1）列表/content/category/list
2）新增节点保存/conntent/category/create，参数 pid，name，返回值 Sysresult
3）修改节点 /content/category/update，参数 id，name，返回值 无
4）删除节点 /content/category/delete，参数 pid，id

部门编号规则：可特殊设置编号，便于删除
100
100001
100002
100002
100101
100101101

递归
1）中间必须有一个判断，出口
2）参数相同

分析内容管理页面
列表链接：/content/query/list

[图片]



####第五天总结：
知识回顾：
1）redis 使用非常简单
1.写数据到 redis 缓存中
2.从 redis 缓存中获取数据
3.经常查询，很少修改，适合放入缓存
4.key必须简短，value习惯放json串（大多数）

2）扩展 短链接
怎么将一个很长的链接转换为一个很短的链接？
md5 (链接)
mysql:
select length (xxx) 查看长度
select md5 (链接) 转换为短链接
2^6=500万变化

可以将短链接和长链接映射关系，放入redis缓存中，
key就是短链接，value就是长链接

3）内容管理 CMS 论坛基础
通用，用户可以自己进行扩充。
用户可以添加分类，分类就成了动态。
内容管理，实际上就是一个图文管理。
EasyUI.tree + datagrid，形成树和表格联动，
右侧的记录不会太多，而且形成分类。
组织机构管理，点击tree节点，将节点id值传递给datagrid控件，
datagrid获取数据时，才可以按这个id进行过滤。

4）业务变负责
分类新增，当父节点为叶子节点时，修改它为父节点。
分类删除，查找当前节点有无其他兄弟节点，如果有就不设置父节点属性，
如果没有其他的兄弟了，将父节点设置为叶子节点，
删除自己，还有删除所有的下级节点，
（递归：判断，出口；将一个参数传入，内部可对该参数改变设置，
springmvc就是这样的一个典型应用，例如：modelAndView对象，
数据简单共享方式，数据隔离）。


